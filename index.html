<!DOCTYPE html>
<html>
   <head>
      <title>Gaming Streams!</title>
      <link href="home.css" rel="stylesheet" type="text/css">
      <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
      <script type="text/javascript">

      	 /*====================== Streamer List ==========================*/
         var wowList = "liquidixmike88,BeyondTheSummit,starladder1,SoloLineAbuse,Bdiz,DotaCinema,TobiWanDOTA,ArenaGamingTv_Dota2,Reckful,tsm_dyrus,behkuhtv,wcs_america,trick2g,painkami,chaoxlol,voyboy,ocelote,riotgames";
         var dota2List = "";
         var sc2List = "";
         var lolList = "";
         /*========================== Functions ==========================*/
         /*Function retrieves json object from the players currently live streaming and displays on playerList.*/
         function getStreamList(streamPlayerList){         	
           	$(".streamer_name").remove();
         	$.getJSON("http://api.justin.tv/api/stream/list.json?channel=" + streamPlayerList + "&jsonp=?", function(data){
         	for(var i=0;i<data.length;i++){
         	$(".streamList").append('<li id="' + data[i].channel.login + '"" class="streamer_name"> <img id="small_img" src="' + data[i].channel.image_url_small + '">' + data[i].channel.login + '<br/>' + data[i].channel_count + '</li>');
         		}
         	});
         }
         /*========================== Functions End =========================*/
         
         
         $(document).ready(function(){
         	/*Menu bar click events*/
         	$(".wow").click(function(){
            	getStreamList(wowList);
         	});
            $(".dota2").click(function(){
                getStreamList(dota2List);
         	});
         	$(".sc2").click(function(){
                getStreamList(sc2List);
         	});
         	$(".lol").click(function(){
                getStreamList(lolList);
         	});
         	
         	/*Updates stream & chat of the player that was clicked on*/
         	$( ".streamList").click(function(evt){
         	  /*Gets the players name from id of clicked button*/
			  var clicked = evt.target;
			  var currentID = clicked.id || "No ID!";
			  if(currentID!="No ID!"){
			  	/*Updates stream*/
			  	$("#streamWrapper").empty();  //deletes all elements in wrapper
			  	$("#streamWrapper").append('<br><h1 align="center">' + currentID + '</h1>');			  	
			  	$("#streamWrapper").append('<object id="streamPlayer" type="application/x-shockwave-flash" height="378" width="680" id="live_embed_player_flash" data="http://www.twitch.tv/widgets/live_embed_player.swf?channel=' + currentID + '" bgcolor="#000000"><param name="allowFullScreen" value="true" /><param name="allowScriptAccess" value="always" /><param name="allowNetworking" value="all" /><param name="movie" value="http://www.twitch.tv/widgets/live_embed_player.swf" /><param name="flashvars" value="hostname=www.twitch.tv&channel=' + currentID + '&auto_play=true&start_volume=25" /></object>');
			  	document.getElementById('streamPlayer').src = document.getElementById('streamPlayer').src; //refreshes the stream player
			  	/*Updates chatbox*/			
				$('iframe').remove();  //removes previous chatbox
				$("#chatboxWrapper").append('<iframe id="chatbox" frameborder="0" scrolling="no" id="chatbox" src="http://twitch.tv/chat/embed?channel=' + currentID + '&amp;popout_chat=true" height="698" width="300"></iframe>');
				document.getElementById('chatbox').src = document.getElementById('chatbox').src; //refreshes the chatbox
			  }
			})
         });
                  
      </script>
   </head>
   <body>
      <a href="index.html"><img src="logo.png" id="banner"></a>
      <!--Menu Bar-->
      <div id="content">
         <ul id="menuBar">
            <li> <a class="lol">League of Legends</a></li>
            <li> <a class="sc2">Starcraft 2</a></li>
            <li> <a class="dota2">Dota 2</a></li>
            <li> <a class="wow">World of Warcraft</a></li>        
         </ul>
      </div>
      <div id="wrapper">
         <div id="playerListWrapper">
            <ul class="streamList">
               <li class="catagory">  STREAMS</li>
            </ul>
         </div>
         <div id="streamWrapper">            
         </div>
         <div id="chatboxWrapper">
         </div>
      </div>
      </div>
      <!--Footer-->
      <div id="footer">
         Copyright &copy; 2013, Streamverse.tv -   &copy; Valve,  &copy; Blizzard Entertainment,  &copy; Riot Games.
      </div>
</html>